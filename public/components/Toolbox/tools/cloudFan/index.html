<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>云风扇</title>
    <!-- Font Awesome for icons (if not already loaded globally) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      /* Basic styles */
      html,
      body {
        height: 100%;
        width: 100%; /* Ensure body takes full width */
        margin: 0;
        padding: 0;
        display: flex;
        /* justify-content: center; Removed to allow content wider feel */
        align-items: center;
        background-color: #f0f0f0; /* Light background */
        font-family: sans-serif;
        overflow: hidden; /* Prevent scrollbars */
        position: relative; /* Needed for absolute positioning of reference link */
      }

      /* Dark mode support (optional, based on parent context) */
      body.dark-mode {
        background-color: #333;
        color: #eee;
      }
      body.dark-mode .box {
        border: 2px solid #444;
      }
      body.dark-mode #nob1 {
        background: rgb(68 68 68);
      }
      body.dark-mode .shu {
        background-color: #444;
      }
      body.dark-mode .shu > div {
        background-color: #666;
        border: 1px solid #444;
      }
      body.dark-mode .shu > div > div {
        background-color: #444;
        color: #fff;
      }
      body.dark-mode .pan {
        background: #444;
      }
      body.dark-mode .shu > div > div.act {
        color: #fff; /* Keep gradient for active button */
        background-image: linear-gradient(-60deg, #ff5858 0%, #f09819 100%);
      }
      /* Style for the reference link */
      #reference-link {
        position: absolute;
        top: 1rem;
        right: 1rem;
        z-index: 10;
      }
      #reference-link a {
        color: #666;
        text-decoration: none;
        font-size: 1.5rem; /* Adjust icon size */
        transition: color 0.2s;
      }
      #reference-link a:hover {
        color: #333;
      }
      body.dark-mode #reference-link a {
        color: #aaa;
      }
      body.dark-mode #reference-link a:hover {
        color: #ddd;
      }

      /* Fan styles extracted from reference */
      .fangshan {
        margin: 0.5rem auto; /* Keep auto margin for horizontal centering */
        width: 10rem; /* Use rem for scalability */
        height: auto;
        transform: scale(1.2); /* Slightly scale up for better view */
        position: relative; /* Needed for absolute positioning of child elements */
      }
      .box {
        width: 10rem;
        height: 10rem;
        border-radius: 100%;
        border: 2px solid rgb(224, 224, 224);
        position: relative;
        background-color: #fff; /* Add background for contrast */
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .box img {
        width: 8rem;
        height: 8rem;
        position: absolute; /* Use absolute positioning */
        top: 1rem; /* Center image */
        left: 1rem; /* Center image */
        /* Removed relative positioning properties */
      }
      #nob1 {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        background: rgb(245, 245, 245);
        position: absolute;
        left: calc(50% - 1.5rem);
        top: calc(50% - 1.5rem);
        z-index: 3;
        box-shadow: rgb(0 0 0 / 20%) 0px 3px 3px -2px,
          rgb(0 0 0 / 14%) 0px 3px 4px 0px, rgb(0 0 0 / 12%) 0px 1px 8px 0px;
      }

      .shu {
        width: 1rem;
        height: 12rem;
        background: #ccc;
        margin-top: -2px; /* Overlap slightly with the box */
        margin-left: calc(50% - 0.5rem);
        position: relative; /* For positioning the controls */
        border-radius: 0.5rem 0.5rem 0 0; /* Rounded top corners */
        z-index: 1; /* Behind the fan box */
      }

      .shu > div.tuo {
        /* This seems decorative, keeping */
        width: 1.8rem;
        height: 0.5rem;
        position: absolute;
        top: 0px;
      }
      /* Controls container */
      #controls {
        width: 1.8rem;
        position: absolute;
        top: 2rem;
        left: -0.4rem;
        border-radius: 5px;
        background-color: #eee;
        border: 1px solid #cccccc; /* Adjusted border */
        text-align: center;
        padding: 0.3rem 0; /* Add some padding */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      /* Control buttons */
      #controls > div {
        width: 1.2rem; /* Slightly larger buttons */
        height: 1.2rem;
        line-height: 1.2rem;
        background-color: #fff;
        border-radius: 50%;
        margin: 0.4rem auto; /* Spacing */
        cursor: pointer;
        font-size: 0.7rem;
        font-weight: bold;
        transition: background-color 0.2s, color 0.2s;
      }

      #controls > div:hover {
        background-color: #e0e0e0;
      }

      /* Active button style */
      #controls > div.act {
        color: #fff;
        background-image: linear-gradient(-60deg, #ff5858 0%, #f09819 100%);
        box-shadow: 0 0 5px rgba(255, 100, 100, 0.7);
      }

      /* Base style */
      .pan {
        width: 8rem;
        height: 1rem; /* Adjusted height */
        margin-left: calc(50% - 4rem);
        /* Adjusted border-radius for a flatter base with slightly rounded top */
        border-radius: 0.5rem 0.5rem 0 0;
        margin-top: -0.5rem; /* Adjusted overlap */
        background: #e0e0e0; /* Slightly lighter base color */
        position: relative;
        z-index: 0; /* Below the stand */
        /* Adjusted shadow for a flatter look */
        box-shadow: 0 3px 3px rgba(0, 0, 0, 0.15);
      }

      /* Dark mode base style */
      body.dark-mode .pan {
        background: #555;
        box-shadow: 0 3px 3px rgba(0, 0, 0, 0.3);
      }

      /* Animation classes */
      .yidang {
        animation: aitoolload 0.6s infinite linear;
      }
      .erdang {
        animation: aitoolload 0.4s infinite linear;
      }
      .sandang {
        animation: aitoolload 0.1s infinite linear;
      }

      @keyframes aitoolload {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <!-- Reference Link -->
    <div id="reference-link">
      <a
        href="https://www.udtool.com/toolbox/play_fengshan.html"
        target="_blank"
        title="参考来源"
      >
        <i class="fas fa-info-circle"></i>
      </a>
    </div>

    <div class="fangshan">
      <div class="box">
        <div id="nob1"></div>
        <!-- 使用本地SVG文件替代外部链接 -->
        <img id="fan-blade" src="./fan-blade.svg" alt="风扇叶片" />
      </div>
      <div class="shu">
        <div class="tuo"></div>
        <!-- Container for controls -->
        <div id="controls">
          <div data-id="1" title="档位 1">1</div>
          <div data-id="2" title="档位 2">2</div>
          <div data-id="3" title="档位 3">3</div>
          <!-- Using Font Awesome icon for off -->
          <div data-id="off" title="关闭">
            <i style="font-size: 0.6rem" class="fas fa-power-off"></i>
          </div>
        </div>
      </div>
      <div class="pan"></div>
    </div>

    <script>
      // Vanilla JavaScript for fan control
      const fanBlade = document.getElementById("fan-blade");
      const controlsContainer = document.getElementById("controls");
      const buttons = controlsContainer.querySelectorAll("div[data-id]");

      // Function to set fan speed
      function setFanSpeed(speed) {
        // Remove 'act' class from all buttons
        buttons.forEach((btn) => btn.classList.remove("act"));

        // Add 'act' class to the clicked button (unless it's 'off')
        const clickedButton = controlsContainer.querySelector(
          'div[data-id="' + speed + '"]'
        );
        if (clickedButton && speed !== "off") {
          clickedButton.classList.add("act");
        }

        // Clear existing animation classes
        fanBlade.classList.remove("yidang", "erdang", "sandang");

        // Apply new animation class based on speed
        switch (speed) {
          case "1":
            fanBlade.classList.add("yidang");
            break;
          case "2":
            fanBlade.classList.add("erdang");
            break;
          case "3":
            fanBlade.classList.add("sandang");
            break;
          case "off":
            // No animation class needed for 'off'
            break;
        }
      }

      // Add event listeners to buttons
      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          const speed = button.dataset.id;
          setFanSpeed(speed);
        });
      });
    </script>
  </body>
</html>
