<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>挑战6.66秒</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        font-family: "Arial Rounded MT Bold", Arial, sans-serif;
      }

      .game-container {
        background: #ffffff;
        padding: 2rem 3rem;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        text-align: center;
      }

      #timeDisplay {
        font-size: 5rem;
        color: #2c3e50;
        background: #f8f9fa;
        padding: 1.5rem 3rem;
        border-radius: 15px;
        margin: 1.5rem 0;
        font-family: "Digital-7", monospace;
        letter-spacing: 2px;
        border: 3px solid #e0e0e0;
      }

      #controlBtn {
        font-size: 1.8rem;
        padding: 1.2rem 3rem;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.2s;
        margin: 1rem 0;
        box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
      }

      #controlBtn:hover {
        background: #2980b9;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
      }

      #controlBtn:active {
        transform: translateY(1px);
      }

      #result {
        margin-top: 1.5rem;
        font-size: 1.4rem;
        color: #2c3e50;
        min-height: 2rem;
        font-weight: bold;
      }

      @font-face {
        font-family: "Digital-7";
        src: url("https://cdn.jsdelivr.net/gh/alphardex/aqua.css@master/fonts/digital-7.ttf");
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <div id="timeDisplay">0.00</div>
      <button id="controlBtn">开始挑战</button>
      <div id="result"></div>
    </div>

    <script>
      let startTime;
      let timer;
      let isRunning = false;
      const targetTime = 6.66;

      const timeDisplay = document.getElementById("timeDisplay");
      const controlBtn = document.getElementById("controlBtn");
      const result = document.getElementById("result");

      function updateDisplay() {
        const currentTime = Date.now() - startTime;
        // 记录实际时间用于结果计算
        const actualSeconds = (currentTime / 1000).toFixed(2);

        // 显示时，第一位小数正常更新
        const firstDecimal = (
          Math.floor((currentTime / 1000) * 10) / 10
        ).toFixed(1);
        // 第二位小数每80毫秒更新一次，但仍然是0-9的循环
        const secondDecimal = Math.floor((currentTime / 60) % 10);

        timeDisplay.innerHTML = `${firstDecimal}<span>${secondDecimal}</span>`;
      }

      function startGame() {
        if (!isRunning) {
          isRunning = true;
          startTime = Date.now();
          controlBtn.textContent = "立即暂停";
          timeDisplay.style.color = "#2c3e50";
          result.textContent = "";

          timer = setInterval(updateDisplay, 10);
        } else {
          clearInterval(timer);
          isRunning = false;
          const endTime = Date.now() - startTime;
          const finalTime = (endTime / 1000).toFixed(2);

          // 在结束时显示准确的时间
          timeDisplay.textContent = finalTime;

          const difference = Math.abs(finalTime - targetTime).toFixed(2);

          controlBtn.textContent = "重新挑战";

          // 结果反馈
          if (difference == 0.0) {
            result.innerHTML = "🎉 完美！精确命中6.66秒！";
            result.style.color = "#27ae60";
            timeDisplay.style.color = "#27ae60";
          } else if (difference <= 0.03) {
            result.innerHTML = `🥈 优秀！仅差 ${difference} 秒`;
            result.style.color = "#f1c40f";
            timeDisplay.style.color = "#f1c40f";
          } else if (difference <= 0.1) {
            result.innerHTML = `👍 不错！差 ${difference} 秒`;
            result.style.color = "#e67e22";
          } else {
            result.innerHTML = `😅 差 ${difference} 秒，再试一次！`;
            result.style.color = "#e74c3c";
          }
        }
      }

      controlBtn.addEventListener("click", startGame);
    </script>
  </body>
</html>
